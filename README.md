# BetterLight - Software Development I Mini Project

This is a mini project within the Software Development I course at KMUTNB. This project controls light bulbs with Arduino ESP32, WebApp, and Zigbee switches in a room.
You can look at all branches which are components of this mini project.

Here the <a href="https://kmutnbacth-my.sharepoint.com/:w:/g/personal/s6501012620063_kmutnb_ac_th/EQ8Y3XFvZ6RHqaU4NodkV2cBK84RMmgoY88TAV6mkM4y0w?e=VsQDXf" target="_blank" rel="noopener noreferrer">link to the report</a>.

---

## Feature

- Able to control light bulbs using Zigbee switches and send status through MQTT protocol between Node-RED and Zigbee devices.
- Able to control light bulbs using WebApp (using Node.js) and Node-RED dashboard those communicate through WebSocket protocol between Node-RED and any browser.
- Able to control light bulbs using ESP32 switches through MQTT protocol between Node-RED and Zigbee devices.

---

## Requirements
### Hardware
- 2x Solderable Bread Board
- 2x 19 Pins, 3x 3 Pins Female Pin Header
- 1x Raspberry Pi 4 Model B 8GB RAM
- 1x ESP32 LOLIN D32
- 4x Button
- 2x Slider
- 1x Zigbee Dongle
- 2x Zigbee Smart Light Bulb 
- 1x Zigbee Smart Button 4 Gang 

### Software
- Windows 10 or Windows 11 (Any editions except S editions)
  - Chrome or Microsoft Edge (Version 119 or newer)
  - Arduino IDE (Version 2.2.1 or newer) with these libraries
    - PubSubClient (Version 2.8 or newer)
    - WiFi101 (Version 0.16.1 or newer)
    - ArduinoJSON (Version 6.21.3 or newer)
  - Visual Studio Code (Version 1.84.1 or newer) with Extensions
    - Remote Development (Version 0.24.0 or newer)
    - Live Server (Version 5.7.9 or newer)
    - Live Share (Version 1.0.5892 or newer)
- Raspbian OS 11 Bullseye
  - Node.js (Version 18 or newer) with these libraries
    - WebSocket (Latest version)
    - Express (Latest version)
    - Path (Latest version)
  - IOTStack (Latest version)
    - Node-RED (Version 3.1.0 or newer) with libraries in the [report](https://kmutnbacth-my.sharepoint.com/:w:/g/personal/s6501012620063_kmutnb_ac_th/EQ8Y3XFvZ6RHqaU4NodkV2cBK84RMmgoY88TAV6mkM4y0w?e=VsQDXf)
    - MQTT Broker (Version 2.0.18 or newer)
    - Portainer.io Community Edition (Version 2.19.1 or newer)
    - Zigbee2MQTT (Latest version)

## How to Run WebApp
Install Node.js and the necessary extension and type "node index.js" on the console to start

## How to Import Node-Red JSON file
1. Open Node-RED
2. Open Menu and click import
3. On the clipboard menu choose JSON file or paste JSON directly
4. Then click import to get the flow
5. Done

## How to Run Arduino Remote
1. Open Arduino IDE
2. Install these libraries (PubSubClient, ArduinoJSON, WiFi101)
3. Create a new sketch
4. Copy the code
5. Plug the board (Make sure pins must be set properly)
6. Upload
7. Done

---
## Contributor
<ul>
  <li><a href="https://skyjt.vercel.app" target="_blank" rel="noopener noreferrer">SkyJTx (Nattakarn)</a></li>
  <li><a href="https://github.com/12inNe" target="_blank" rel="noopener noreferrer">12inNe (Pumin)</a></li>
  <li><a href="https://github.com/Rookies111" target="_blank" rel="noopener noreferrer">Rookies111 (Chaiyapat)</a></li>
</ul>
